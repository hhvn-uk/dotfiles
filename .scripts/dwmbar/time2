#!/bin/sh

currdate=$(date +%H:%M:%S)
datediff $(cat $HOME/.cache/wttrD) $currdate | grep '^-' >/dev/null && col="^c#000000^"
datediff $(cat $HOME/.cache/wttrd) $currdate | grep -v '^-' >/dev/null && col="^c#000000^"

[ "$col" = "" ] && {
	<$HOME/.cache/wttrC grep -Ei 'clear|sun' >/dev/null && col="^c#eeaaaa^"
	<$HOME/.cache/wttrC grep -Ei 'rain|shower' >/dev/null && col="^c#8888ee^"
	datediff $(cat $HOME/.cache/wttrS) $currdate | grep '^-' >/dev/null && col="^c#000099^"
	datediff $(cat $HOME/.cache/wttrs) $currdate | grep -v '^-' >/dev/null && col="^c#000099^"
}
[ "$col" = "" ] && col="^c#cccccc^"

echo "[${col}${currdate}]"
