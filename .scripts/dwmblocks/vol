#!/bin/sh
# Copyright (c) 2019-2021 Hayden Hamilton.

[ "$(uname)" = "Linux" ] && {
	toggled=$(amixer sget Master | awk '/Mono/ {print $6}' | tr -d '[]')
	volume=$(amixer sget Master | awk '/Mono/ {print $4}' | tr -d '[]')
}
[ "$(uname)" = "OpenBSD" ] && {
	toggled=$(sndioctl output.mute | sed 's/.*=//;s/0/on/;s/1/off/')
	volume=$(sndioctl output.level | sed -E 's/.*=//;s/(.)\.(..)(.)/\1\2.\3/;s/^0*//;s/\.0$//;s/$/%/')
}
output="$(echo ${volume} | tr "\n" " ")$(echo "${toggled}" | grep 'on' >/dev/null && printf '^c#00cc00^' || printf '^c#cc0000^')$(echo ${toggled} | tr "\n" " " | sed 's/ //g')"
echo "[VOL $output]"
