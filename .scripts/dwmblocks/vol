#!/bin/sh
# Copyright (c) 2019-2021 Hayden Hamilton.

[ "$(uname)" = "Linux" ] && {
	toggled=$(amixer sget Master | awk '/Mono/ {print $6}' | tr -d '[]')
	volume=$(amixer sget Master | awk '/Mono/ {print $4}' | tr -d '[]')
}
[ "$(uname)" = "OpenBSD" ] && {
	toggled=$(sndioctl output.mute | sed 's/.*=//;s/0/on/;s/1/off/')
	volume=$(sndioctl output.level | sed -E 's/.*=//;s/(.)\.(..)(.)/\1\2.\3/;s/^0*//;s/\.0$//;s/$/%/')
}

colour="^c#7777cc^"
colour2="^d^"
echo "$toggled" | grep on >/dev/null || {
	colour="^c#555555^"
	colour2="^c#666666^"
}

printf '[%sVOL%s%s]' "$colour" "$colour2" "${volume}"
