#!/bin/sh
#
# rmpv
# Created by Hayden Hamilton
#
# haydenvh.com
# Copyright (c) 2019-2020 Hayden Hamilton.

dir=$1
count="$2"
filetypes="mp3 opus mkv mp4 flac m4a webm wav"

files=$(find $dir | grep -E 'mp3$|opus$|mkv$|mp4$|flac$|m4a$|webm$|wav$' | shuf | head -n $count)
echo "$files" | grep '[[:alnum:]]' >/dev/null || {
	echo "No files found..."
	exit 1
}

echo "$1" | grep "music" && mpv --input-ipc-server=/tmp/mpv-socket $files --no-video || mpv --input-ipc-server=/tmp/mpv-socket $files
