#!/bin/sh

content=$(curl -H "Accept-Language: en-US" -qsL $1)

title=$(echo "$content" | grep '\[{\"videoPrimaryInfoRenderer\":{\"title\":{\"runs\"\:\[{\"text\":' | sed 's/.*\[{\"videoPrimaryInfoRenderer\":{\"title\":{\"runs\"\:\[{\"text\":// ; s/}\]}.*// ; s/\\//g ; s/^\"// ; s/.$//')
author=$(echo "$content" | grep -o 'author":[^}]*}' | sed -E 's/.*:"([^"]*).*/\1/g')
date=$(echo "$content" | grep -o 'uploadDate":[^}]*}' | sed -E 's/.*:"([^"]*).*/\1/g;s/([0-9]*)-([0-9]*)-([0-9]*)/\3-\2-\1/')
views=$(echo "$content" | grep -o 'viewCount":[^}]*}' | head -n 1 | grep -o 'simpleText":[^}]*}' | sed -E 's/.*:"([^"]*).*/\1/g ; s/ views//;s/ Aufrufe//g;s/\./,/g')
length=$(echo "$content" | grep '\<meta itemprop=\"duration\"' | sed 's/.*content\=// ; s/\"//g ; s/PT// ; s/./\L&/g ; s/.$//')

printf "URI:       %s\nTitle:     %s\nAuthor:    %s\nPublished: %s\nLength:    %s\nViews:     %s\n" \
	"$1" \
	"$title" \
	"$author" \
	"$date" \
	"$length" \
	"$views"
