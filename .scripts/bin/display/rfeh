#!/bin/bash
#
# rfeh
# Created by Hayden Hamilton
#
# haydenvh.com
# Copyright (c) 2019-2020 Hayden Hamilton.

backend="xwallpaper"

[ -z $1 ] && echo 'rfeh /path/to/folder [number of monitors or "auto"] [true for locking] [program to lock with]

Written by Hayden Hamilton <hayden@haydenvh.com>' && exit 0


monitors=2
files=$(find $1/ -name "*png" | shuf | head -n $monitors)
echo $files > $HOME/.cache/rfeh/prev
files=$(echo "$files" | tr " " "\n" | sed "s~^~--output OUTPUT --zoom ~g" | tr "\n" " ")
for OUTPUT in $(xrandr --listactivemonitors | awk '$4 {print $4}')
do
	files=$(echo "$files" | sed "s/OUTPUT/$OUTPUT/")
done
xwallpaper $files
