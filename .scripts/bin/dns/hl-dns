#!/bin/sh

path="/tmp" # change this depending on the base of your gopher server
cd $path

mkdir -p sources
touch dns.custom
sources="gnu.matrix 45.32.178.12" # each host is seperated by a space char, priority from left to right

for s in $sources
do
        curl gopher://$s/1/dns > sources/$s
	touch sources/$s
done

for s in $sources
do
        sf="$sf sources/$s"
done

cat $(echo "$sf" | sed 's/^ //g') dns.custom | sort | uniq > dns
[ ! -f /etc/hosts.old ] && cp /etc/hosts /etc/hosts.old
cat /etc/hosts.old dns > /etc/hosts

rm -rf sources
