#!/bin/sh

export LC_ALL=c

a="$1"
shift

case "$a" in
	genkey) gpg --gen-key ;;
	export-key) 
		for k in $@
		do
			gpg --fingerprint $k
			printf "Destination? "
			read -r dest </dev/tty
			gpg --export --armour $k > $dest
		done
		;;
	export-keyring) gpg --export --armour ;;
	list*) 
		[ ! -z $1 ] && args="--keyid-format $1"
		gpg --list-keys $args && gpg --list-secret-keys $args
		;;
	encrypt) gpg --encrypt --sign --armour --passphrase "$(dpass gpg2key)" -r "$1" ;;
esac
